# HCM 분산 시스템 테스트 및 데모 가이드\n\n## 📋 개요\n\n인적 자본 관리(HCM) 기반 분산 시스템 최적화 프로젝트의 통합 테스트 및 데모 시나리오 실행 가이드입니다.\n\n## 🏗️ 시스템 아키텍처\n\n```\n┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐\n│   API Gateway   │◄──►│  Matching Engine │◄──►│   Edge Agent    │\n│   (Port 3000)   │    │   (Port 3002)    │    │   (Port 3004)   │\n└─────────┬───────┘    └──────────────────┘    └─────────────────┘\n          │                       │                       │\n          ▼                       ▼                       ▼\n┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐\n│  HR Resource    │    │     Redis        │    │    Neo4j        │\n│   (Port 3001)   │    │   (Port 6379)    │    │   (Port 7687)   │\n└─────────────────┘    └──────────────────┘    └─────────────────┘\n```\n\n## 🚀 시작하기\n\n### 1. 사전 요구사항\n\n```bash\n# Node.js 18+ 설치 확인\nnode --version\n\n# 의존성 설치\nnpm install\n\n# 인프라 서비스 시작 (Docker 필요)\nnpm run infra:start\n```\n\n### 2. 환경 변수 설정\n\n`.env` 파일을 프로젝트 루트에 생성:\n\n```bash\n# API Gateway\nAPI_GATEWAY_PORT=3000\nGATEWAY_WS_PORT=3006\n\n# HR Resource Service\nHR_SERVICE_PORT=3001\n\n# Matching Engine\nMATCHING_ENGINE_PORT=3002\nMATCHING_WS_PORT=3003\n\n# Edge Agent\nEDGE_AGENT_PORT=3004\nEDGE_WS_PORT=3005\nEDGE_GRPC_PORT=50051\n\n# Database\nNEO4J_URI=bolt://localhost:7687\nNEO4J_USER=neo4j\nNEO4J_PASSWORD=password\n\n# Redis\nREDIS_HOST=localhost\nREDIS_PORT=6379\n```\n\n## 🏃‍♂️ 서비스 실행\n\n### 전체 시스템 실행\n\n```bash\n# 모든 서비스 동시 실행\nnpm run dev:all\n```\n\n### 개별 서비스 실행\n\n```bash\n# API Gateway\nnpm run dev:gateway\n\n# HR Resource Service\nnpm run dev:hr\n\n# Matching Engine\nnpm run dev:matching\n\n# Edge Agent\nnpm run dev:edge\n```\n\n## 🧪 테스트 실행\n\n### 1. 통합 테스트\n\n```bash\n# 전체 통합 테스트 실행\nnpm run test:integration\n\n# 특정 테스트 파일 실행\nnpx jest tests/integration/system.test.ts\n\n# 테스트 상세 로그와 함께 실행\nnpx jest --verbose tests/integration/system.test.ts\n```\n\n### 2. 데모 시나리오 실행\n\n```bash\n# 전체 데모 시나리오 실행\nnpx ts-node tests/scenarios/demo.ts\n\n# 상세 로그와 함께 실행\nnpx ts-node tests/scenarios/demo.ts --verbose\n\n# 헬스체크 건너뛰고 실행\nnpx ts-node tests/scenarios/demo.ts --skip-health\n```\n\n## 📊 데모 시나리오 상세\n\n### 시나리오 1: 신규 직원 온보딩 워크플로우\n- **목적**: 신규 직원 등록부터 시스템 초기화까지의 전체 프로세스 테스트\n- **과정**:\n  1. HR 시스템에 직원 정보 등록\n  2. Edge Agent 분산 시스템 초기화\n  3. 초기 작업 추천 생성\n- **예상 소요시간**: 3-5초\n\n### 시나리오 2: 지능형 작업 매칭 시스템\n- **목적**: AI 기반 작업-직원 매칭 알고리즘 성능 검증\n- **과정**:\n  1. 복잡한 프로젝트 작업 생성\n  2. 스킬 기반 후보자 검색\n  3. 매칭 점수 및 신뢰도 계산\n  4. 자동/수동 할당 결정\n- **예상 소요시간**: 2-4초\n\n### 시나리오 3: 분산 작업 실행\n- **목적**: Edge Agent 클러스터의 분산 작업 처리 능력 검증\n- **과정**:\n  1. 다양한 유형의 분산 작업 제출\n  2. 클러스터 상태 모니터링\n  3. 작업 할당 및 실행 확인\n- **예상 소요시간**: 2-3초\n\n### 시나리오 4: 자율 장애 감지 및 복구\n- **목적**: 시스템의 자동 장애 대응 능력 검증\n- **과정**:\n  1. 모의 장애 상황 주입\n  2. 자동 감지 및 알림\n  3. 복구 액션 실행\n  4. 시스템 정상화 확인\n- **예상 소요시간**: 3-5초\n\n### 시나리오 5: 실시간 모니터링\n- **목적**: WebSocket 기반 실시간 시스템 모니터링 기능 검증\n- **과정**:\n  1. 모니터링 WebSocket 연결\n  2. 실시간 상태 업데이트 수신\n  3. 이벤트 처리 확인\n- **예상 소요시간**: 3-5초\n\n## 📈 테스트 결과 분석\n\n### 성공 기준\n- 모든 서비스 헬스체크 통과\n- 각 시나리오 95% 이상 성공률\n- 응답 시간 목표치 달성\n- 에러 없는 실행 완료\n\n### 목표 성능 지표\n- **직원 온보딩**: < 5초\n- **작업 매칭**: < 3초  \n- **분산 작업 제출**: < 2초\n- **장애 복구**: < 10초\n- **실시간 모니터링 지연**: < 100ms\n\n## 🔧 문제 해결\n\n### 실패 시 체크포인트\n1. **서비스 연결 문제**\n   ```bash\n   # 서비스 상태 확인\n   curl http://localhost:3000/health\n   curl http://localhost:3001/health\n   curl http://localhost:3002/health\n   curl http://localhost:3004/health\n   ```\n\n2. **데이터베이스 연결 문제**\n   ```bash\n   # Neo4j 상태 확인\n   curl http://localhost:7474/browser/\n   \n   # Redis 상태 확인\n   redis-cli ping\n   ```\n\n### 일반적인 문제들\n\n#### 1. 서비스 시작 실패\n```bash\n# 로그 확인\nnpm run logs:all\n\n# 개별 서비스 로그\ntail -f hr-resource.log\ntail -f matching-engine.log\ntail -f edge-agent.log\n```\n\n#### 2. 데이터베이스 연결 오류\n```bash\n# 인프라 서비스 재시작\nnpm run infra:restart\n\n# 특정 서비스만 재시작\ndocker-compose restart neo4j\ndocker-compose restart redis\n```\n\n## 🎯 API 엔드포인트 테스트\n\n### Gateway APIs\n```bash\n# 시스템 헬스체크\ncurl http://localhost:3000/health\n\n# 서비스 레지스트리\ncurl http://localhost:3000/services\n\n# 통합 분석\ncurl http://localhost:3000/analytics/overview\n```\n\n### 워크플로우 APIs\n```bash\n# 직원 온보딩\ncurl -X POST http://localhost:3000/workflows/employee-onboarding \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"테스트 직원\",\n    \"email\": \"test@company.com\",\n    \"department\": \"Engineering\",\n    \"skills\": [{\"name\": \"JavaScript\", \"level\": \"advanced\"}]\n  }'\n\n# 작업 할당\ncurl -X POST http://localhost:3000/workflows/task-assignment \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"title\": \"테스트 작업\",\n    \"requiredSkills\": [{\"name\": \"JavaScript\", \"level\": \"intermediate\", \"mandatory\": true, \"weight\": 8}],\n    \"estimatedHours\": 16\n  }'\n```\n\n## 📊 모니터링 및 로깅\n\n### 로그 파일 위치\n- `api-gateway.log` - API Gateway 로그\n- `hr-resource.log` - HR 서비스 로그  \n- `matching-engine.log` - 매칭 엔진 로그\n- `edge-agent.log` - Edge Agent 로그\n\n### 실시간 로그 모니터링\n```bash\n# 모든 로그 실시간 확인\nnpm run logs:all\n\n# 특정 서비스 로그\nnpm run logs:hr\n\n# 에러 로그만 필터링\ntail -f *.log | grep ERROR\n```\n\n## 📋 체크리스트\n\n### 테스트 실행 전\n- [ ] 모든 의존성 설치 완료\n- [ ] 환경 변수 설정 완료\n- [ ] 인프라 서비스 (Redis, Neo4j) 실행 중\n- [ ] 모든 애플리케이션 서비스 실행 중\n- [ ] 포트 충돌 없음\n\n### 테스트 실행 중\n- [ ] 모든 서비스 헬스체크 통과\n- [ ] 네트워크 연결 안정\n- [ ] 충분한 시스템 리소스 확보\n- [ ] 로그 에러 메시지 없음\n\n### 테스트 완료 후\n- [ ] 모든 시나리오 성공\n- [ ] 성능 목표치 달성\n- [ ] 데이터 정합성 확인\n- [ ] 리소스 정리 완료\n\n---\n\n**✨ 모든 테스트가 성공하면 HCM 분산 시스템이 정상적으로 작동하는 것입니다!**